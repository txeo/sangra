{"changed":true,"filter":false,"title":"sangra.c","tooltip":"/src/sangra.c","value":"#include \"includes/sangra.h\"\n\n  // ---- //\n // VARS //  \n// ---- //\n\nstatic Window *window;\nTextLayer *yoga_tea_layer;\nTextLayer *time_layer;\nStatusBarLayer *status_bar;\n\n  // --------- //\n // FUNCTIONS //  \n// --------- //\n\n// 0. Clicks Config (Only for apps)\nstatic void select_click_handler(ClickRecognizerRef recognizer, void *context) {\n//  text_layer_set_text(text_layer, \"Select\");\n}\nstatic void up_click_handler(ClickRecognizerRef recognizer, void *context) {\n//  text_layer_set_text(text_layer, \"Up\");\n}\nstatic void down_click_handler(ClickRecognizerRef recognizer, void *context) {\n//  text_layer_set_text(text_layer, \"Down\");\n}\nstatic void click_config_provider(void *context) {\n  window_single_click_subscribe(BUTTON_ID_SELECT, select_click_handler);\n  window_single_click_subscribe(BUTTON_ID_UP, up_click_handler);\n  window_single_click_subscribe(BUTTON_ID_DOWN, down_click_handler);\n}\n\n// 1. Time Subscriber & Tick Handlers (TIME!!!)  \nstatic void update_time() {\n  // Get a tm structure\n  time_t temp = time(NULL); \n  struct tm *tick_time = localtime(&temp);\n\n  // Create a long-lived buffer\n  static char buffer[] = \"00:00\";\n\n  // Write the current hours and minutes into the buffer\n  if(clock_is_24h_style() == true) {\n    // Use 24 hour format\n    strftime(buffer, sizeof(\"00:00\"), \"%H:%M:%S\", tick_time);\n  } else {\n    // Use 12 hour format\n    strftime(buffer, sizeof(\"00:00\"), \"%I:%M:%S\", tick_time);\n  }\n  \n     time_layer = text_layer_create(GRect(0, 12, 144, 50));\n  text_layer_set_background_color(time_layer, GColorBlack);\n  text_layer_set_text_color(time_layer, GColorWhite);\n  text_layer_set_text(time_layer, \"00:00:00\");\n\n  // Improve the layout to be more like a watchface\n  text_layer_set_font(time_layer, fonts_get_system_font(FONT_KEY_BITHAM_30_BLACK));\n  text_layer_set_text_alignment(time_layer, GTextAlignmentCenter);\n\n  // Add it as a child layer to the Window's root layer\n  layer_add_child(window_get_root_layer(window), text_layer_get_layer(time_layer));\n  // Display this time on the TextLayer\n text_layer_set_text(time_layer, buffer);\n \n}\nstatic void tick_handler(struct tm *tick_time, TimeUnits units_changed) {\n update_time();\n}\n\n// 1. Window Functions\nstatic void main_window_unload(Window *window) {\n\n}\nstatic void main_window_load(Window *window) {\n\n}\nstatic void initialize_main_window () {\n  \n  // Create main Window element and assign to pointer\n  window = window_create();\n\n  // Configure Clics (Only for apps)\n  window_set_click_config_provider(window, click_config_provider);\n\n  // Set handlers to manage the elements inside the Window\n  window_set_window_handlers(window, (WindowHandlers) {\n    .load = main_window_load,\n    .unload = main_window_unload\n  });\n\n  // Pa la barra de herramientas!\n  window_set_background_color(window, GColorBlack);\n\n\t  // Show the Window on the watch, with animated=true\n\t// Push the window\n\twindow_stack_push(window, true);\n\n  // Make sure the time is displayed from the start\n  update_time();\n}\n\n// 2. Text Functions\nstatic void showText (char *text, char *font, GColor front_color, GColor background_color, int vertical_align, TextLayer *text_layer) {\n  \n  // Init init vars\n  int y = 0;\n  \n  // Choosing vertical alignment\n  switch (vertical_align) {\n    case TOP_ALIGN: y = 0; break;    // TOP\n    case MIDDLE_ALIGN: y = 60; break;   // CENTER\n    case BOTTOM_ALIGN: y = 120; break;  // BOTTOM\n    default: y=0;\n  }\n    \n  // Creating text layer\n\ttext_layer = text_layer_create(GRect(0, y, 144, 154));\n\n\t// Set the text, font, and text alignment\n\ttext_layer_set_text(text_layer, text);\n\ttext_layer_set_font(text_layer, fonts_get_system_font(font));\n\ttext_layer_set_text_alignment(text_layer, GTextAlignmentCenter);\n  text_layer_set_text_color(text_layer, front_color);\n  text_layer_set_background_color(text_layer, background_color);\n  \n  \n  // Add the text layer to the window\n  layer_add_child(window_get_root_layer(window), text_layer_get_layer(text_layer));\n}\n \n \n static void init() {\n \n  // Initialize Window\n  initialize_main_window();\n  \n  \n //showText(\"Arriba\", FONT_KEY_GOTHIC_18_BOLD, GColorBlack,GColorWhite,TOP_ALIGN,time_layer);\n \n char * yoga_tea_phrase = yoga_tea_phrases[( rand() % N_ELEMENTS(yoga_tea_phrases) )];\n \n if (strlen(yoga_tea_phrase) > 48) {\n   showText(yoga_tea_phrase, FONT_KEY_GOTHIC_24_BOLD, GColorBlack,GColorWhite,MIDDLE_ALIGN,yoga_tea_layer);\n } else {\n   showText(yoga_tea_phrase, FONT_KEY_GOTHIC_28, GColorClear,GColorWhite,MIDDLE_ALIGN,yoga_tea_layer);\n }\n \n /*if (strlen(yoga_tea_phrase) < 25) {\n   showText(yoga_tea_phrase, FONT_KEY_GOTHIC_, GColorBlack,GColorWhite,MIDDLE_ALIGN,yoga_tea_layer);\n } */\n \n \n \n tick_timer_service_subscribe(SECOND_UNIT, tick_handler);\n\n\t// App Logging!\n\tAPP_LOG(APP_LOG_LEVEL_DEBUG, \"Just pushed a window!\");\n}\nstatic void deinit() {\n  \n  // Destroy text layers\n  text_layer_destroy (yoga_tea_layer);\n  text_layer_destroy (time_layer);\n  \n  // Destroy Window\n   window_destroy(window);\n}\nint main(void) {\n  init();\n  app_event_loop();\n  deinit();\n}\n\n","undoManager":{"mark":-17,"position":100,"stack":[[{"start":{"row":147,"column":47},"end":{"row":147,"column":48},"action":"remove","lines":["O"],"id":754}],[{"start":{"row":147,"column":46},"end":{"row":147,"column":47},"action":"remove","lines":["B"],"id":755}],[{"start":{"row":147,"column":45},"end":{"row":147,"column":46},"action":"remove","lines":["_"],"id":756}],[{"start":{"row":147,"column":44},"end":{"row":147,"column":45},"action":"remove","lines":["_"],"id":757}],[{"start":{"row":147,"column":43},"end":{"row":147,"column":44},"action":"remove","lines":["C"],"id":758}],[{"start":{"row":147,"column":42},"end":{"row":147,"column":43},"action":"remove","lines":["I"],"id":759}],[{"start":{"row":147,"column":41},"end":{"row":147,"column":42},"action":"remove","lines":["H"],"id":760}],[{"start":{"row":147,"column":40},"end":{"row":147,"column":41},"action":"remove","lines":["T"],"id":761}],[{"start":{"row":147,"column":39},"end":{"row":147,"column":40},"action":"remove","lines":["O"],"id":762}],[{"start":{"row":147,"column":38},"end":{"row":147,"column":39},"action":"remove","lines":["G"],"id":763}],[{"start":{"row":147,"column":37},"end":{"row":147,"column":38},"action":"remove","lines":["_"],"id":764}],[{"start":{"row":147,"column":36},"end":{"row":147,"column":37},"action":"remove","lines":["Y"],"id":765}],[{"start":{"row":147,"column":35},"end":{"row":147,"column":36},"action":"remove","lines":["E"],"id":766}],[{"start":{"row":147,"column":34},"end":{"row":147,"column":35},"action":"remove","lines":["K"],"id":767}],[{"start":{"row":147,"column":33},"end":{"row":147,"column":34},"action":"remove","lines":["_"],"id":768}],[{"start":{"row":147,"column":32},"end":{"row":147,"column":33},"action":"remove","lines":["T"],"id":769}],[{"start":{"row":147,"column":31},"end":{"row":147,"column":32},"action":"remove","lines":["N"],"id":770}],[{"start":{"row":147,"column":30},"end":{"row":147,"column":31},"action":"remove","lines":["O"],"id":771}],[{"start":{"row":147,"column":29},"end":{"row":147,"column":30},"action":"remove","lines":["F"],"id":772}],[{"start":{"row":147,"column":29},"end":{"row":147,"column":53},"action":"insert","lines":["FONT_KEY_BITHAM_30_BLACK"],"id":773}],[{"start":{"row":148,"column":3},"end":{"row":151,"column":1},"action":"remove","lines":["else {","   showText(yoga_tea_phrase, FONT_KEY_GOTHIC_28_BOLD, GColorBlack,GColorWhite,MIDDLE_ALIGN,yoga_tea_layer);"," }"," "],"id":774}],[{"start":{"row":146,"column":32},"end":{"row":146,"column":33},"action":"remove","lines":["0"],"id":775}],[{"start":{"row":146,"column":32},"end":{"row":146,"column":33},"action":"insert","lines":["5"],"id":776}],[{"start":{"row":140,"column":32},"end":{"row":140,"column":33},"action":"remove","lines":["0"],"id":777}],[{"start":{"row":140,"column":32},"end":{"row":140,"column":33},"action":"insert","lines":["8"],"id":778}],[{"start":{"row":148,"column":3},"end":{"row":148,"column":4},"action":"insert","lines":["*"],"id":779}],[{"start":{"row":148,"column":4},"end":{"row":148,"column":5},"action":"insert","lines":["/"],"id":780}],[{"start":{"row":145,"column":1},"end":{"row":145,"column":2},"action":"insert","lines":["/"],"id":781}],[{"start":{"row":145,"column":2},"end":{"row":145,"column":3},"action":"insert","lines":["*"],"id":782}],[{"start":{"row":145,"column":2},"end":{"row":145,"column":3},"action":"remove","lines":["*"],"id":783}],[{"start":{"row":145,"column":1},"end":{"row":145,"column":2},"action":"remove","lines":["/"],"id":784}],[{"start":{"row":148,"column":4},"end":{"row":148,"column":5},"action":"remove","lines":["/"],"id":785}],[{"start":{"row":148,"column":3},"end":{"row":148,"column":4},"action":"remove","lines":["*"],"id":786}],[{"start":{"row":147,"column":52},"end":{"row":147,"column":53},"action":"remove","lines":["K"],"id":787}],[{"start":{"row":147,"column":51},"end":{"row":147,"column":52},"action":"remove","lines":["C"],"id":788}],[{"start":{"row":147,"column":50},"end":{"row":147,"column":51},"action":"remove","lines":["A"],"id":789}],[{"start":{"row":147,"column":49},"end":{"row":147,"column":50},"action":"remove","lines":["L"],"id":790}],[{"start":{"row":147,"column":48},"end":{"row":147,"column":49},"action":"remove","lines":["B"],"id":791}],[{"start":{"row":147,"column":48},"end":{"row":147,"column":49},"action":"insert","lines":["M"],"id":792}],[{"start":{"row":147,"column":49},"end":{"row":147,"column":50},"action":"insert","lines":["E"],"id":793}],[{"start":{"row":147,"column":50},"end":{"row":147,"column":51},"action":"insert","lines":["D"],"id":794}],[{"start":{"row":147,"column":51},"end":{"row":147,"column":52},"action":"insert","lines":["I"],"id":795}],[{"start":{"row":147,"column":52},"end":{"row":147,"column":53},"action":"insert","lines":["U"],"id":796}],[{"start":{"row":147,"column":53},"end":{"row":147,"column":54},"action":"insert","lines":["M"],"id":797}],[{"start":{"row":143,"column":51},"end":{"row":143,"column":52},"action":"remove","lines":["D"],"id":798}],[{"start":{"row":143,"column":50},"end":{"row":143,"column":51},"action":"remove","lines":["L"],"id":799}],[{"start":{"row":143,"column":49},"end":{"row":143,"column":50},"action":"remove","lines":["O"],"id":800}],[{"start":{"row":143,"column":48},"end":{"row":143,"column":49},"action":"remove","lines":["B"],"id":801}],[{"start":{"row":143,"column":47},"end":{"row":143,"column":48},"action":"remove","lines":["_"],"id":802}],[{"start":{"row":140,"column":31},"end":{"row":140,"column":33},"action":"remove","lines":["48"],"id":803},{"start":{"row":140,"column":31},"end":{"row":140,"column":32},"action":"insert","lines":["5"]}],[{"start":{"row":140,"column":32},"end":{"row":140,"column":33},"action":"insert","lines":["2"],"id":804}],[{"start":{"row":140,"column":32},"end":{"row":140,"column":33},"action":"remove","lines":["2"],"id":805}],[{"start":{"row":140,"column":31},"end":{"row":140,"column":32},"action":"remove","lines":["5"],"id":806}],[{"start":{"row":140,"column":31},"end":{"row":140,"column":32},"action":"insert","lines":["4"],"id":807}],[{"start":{"row":140,"column":32},"end":{"row":140,"column":33},"action":"insert","lines":["8"],"id":808}],[{"start":{"row":147,"column":29},"end":{"row":147,"column":54},"action":"remove","lines":["FONT_KEY_BITHAM_30_MEDIUM"],"id":809},{"start":{"row":147,"column":29},"end":{"row":147,"column":52},"action":"insert","lines":["FONT_KEY_GOTHIC_24_BOLD"]}],[{"start":{"row":147,"column":51},"end":{"row":147,"column":52},"action":"remove","lines":["D"],"id":810}],[{"start":{"row":147,"column":50},"end":{"row":147,"column":51},"action":"remove","lines":["L"],"id":811}],[{"start":{"row":147,"column":49},"end":{"row":147,"column":50},"action":"remove","lines":["O"],"id":812}],[{"start":{"row":147,"column":48},"end":{"row":147,"column":49},"action":"remove","lines":["B"],"id":813}],[{"start":{"row":147,"column":47},"end":{"row":147,"column":48},"action":"remove","lines":["_"],"id":814}],[{"start":{"row":147,"column":46},"end":{"row":147,"column":47},"action":"remove","lines":["4"],"id":815}],[{"start":{"row":147,"column":45},"end":{"row":147,"column":46},"action":"remove","lines":["2"],"id":816}],[{"start":{"row":147,"column":45},"end":{"row":147,"column":46},"action":"insert","lines":["4"],"id":817}],[{"start":{"row":147,"column":46},"end":{"row":147,"column":47},"action":"insert","lines":["8"],"id":818}],[{"start":{"row":147,"column":46},"end":{"row":147,"column":47},"action":"remove","lines":["8"],"id":819}],[{"start":{"row":147,"column":45},"end":{"row":147,"column":46},"action":"remove","lines":["4"],"id":820}],[{"start":{"row":146,"column":1},"end":{"row":146,"column":2},"action":"insert","lines":["/"],"id":821}],[{"start":{"row":146,"column":2},"end":{"row":146,"column":3},"action":"insert","lines":["*"],"id":822}],[{"start":{"row":148,"column":3},"end":{"row":148,"column":4},"action":"insert","lines":["*"],"id":823}],[{"start":{"row":148,"column":4},"end":{"row":148,"column":5},"action":"insert","lines":["/"],"id":824}],[{"start":{"row":143,"column":55},"end":{"row":143,"column":60},"action":"remove","lines":["Black"],"id":845},{"start":{"row":143,"column":55},"end":{"row":143,"column":56},"action":"insert","lines":["C"]}],[{"start":{"row":143,"column":56},"end":{"row":143,"column":57},"action":"insert","lines":["l"],"id":846}],[{"start":{"row":143,"column":57},"end":{"row":143,"column":58},"action":"insert","lines":["e"],"id":847}],[{"start":{"row":143,"column":58},"end":{"row":143,"column":59},"action":"insert","lines":["a"],"id":848}],[{"start":{"row":143,"column":59},"end":{"row":143,"column":60},"action":"insert","lines":["r"],"id":849}],[{"start":{"row":143,"column":59},"end":{"row":143,"column":60},"action":"remove","lines":["r"],"id":850}],[{"start":{"row":143,"column":58},"end":{"row":143,"column":59},"action":"remove","lines":["a"],"id":851}],[{"start":{"row":143,"column":57},"end":{"row":143,"column":58},"action":"remove","lines":["e"],"id":852}],[{"start":{"row":143,"column":56},"end":{"row":143,"column":57},"action":"remove","lines":["l"],"id":853}],[{"start":{"row":143,"column":55},"end":{"row":143,"column":56},"action":"remove","lines":["C"],"id":854}],[{"start":{"row":143,"column":55},"end":{"row":143,"column":56},"action":"insert","lines":["C"],"id":855}],[{"start":{"row":143,"column":56},"end":{"row":143,"column":57},"action":"insert","lines":["l"],"id":856}],[{"start":{"row":143,"column":57},"end":{"row":143,"column":58},"action":"insert","lines":["e"],"id":857}],[{"start":{"row":143,"column":58},"end":{"row":143,"column":59},"action":"insert","lines":["a"],"id":858}],[{"start":{"row":143,"column":59},"end":{"row":143,"column":60},"action":"insert","lines":["r"],"id":859}],[{"start":{"row":101,"column":40},"end":{"row":101,"column":41},"action":"insert","lines":["*"],"id":860}],[{"start":{"row":101,"column":40},"end":{"row":101,"column":41},"action":"remove","lines":["*"],"id":868}],[{"start":{"row":101,"column":34},"end":{"row":101,"column":39},"action":"remove","lines":["GFont"],"id":869},{"start":{"row":101,"column":34},"end":{"row":101,"column":35},"action":"insert","lines":["C"]}],[{"start":{"row":101,"column":35},"end":{"row":101,"column":36},"action":"insert","lines":["H"],"id":870}],[{"start":{"row":101,"column":36},"end":{"row":101,"column":37},"action":"insert","lines":["A"],"id":871}],[{"start":{"row":101,"column":37},"end":{"row":101,"column":38},"action":"insert","lines":["R"],"id":872}],[{"start":{"row":101,"column":37},"end":{"row":101,"column":38},"action":"remove","lines":["R"],"id":873}],[{"start":{"row":101,"column":36},"end":{"row":101,"column":37},"action":"remove","lines":["A"],"id":874}],[{"start":{"row":101,"column":35},"end":{"row":101,"column":36},"action":"remove","lines":["H"],"id":875}],[{"start":{"row":101,"column":34},"end":{"row":101,"column":35},"action":"remove","lines":["C"],"id":876}],[{"start":{"row":101,"column":34},"end":{"row":101,"column":35},"action":"insert","lines":["c"],"id":877}],[{"start":{"row":101,"column":35},"end":{"row":101,"column":36},"action":"insert","lines":["h"],"id":878}],[{"start":{"row":101,"column":36},"end":{"row":101,"column":37},"action":"insert","lines":["a"],"id":879}],[{"start":{"row":101,"column":37},"end":{"row":101,"column":38},"action":"insert","lines":["r"],"id":880}],[{"start":{"row":101,"column":39},"end":{"row":101,"column":40},"action":"insert","lines":["*"],"id":881}]]},"ace":{"folds":[{"start":{"row":16,"column":80},"end":{"row":18,"column":0},"placeholder":"..."},{"start":{"row":19,"column":76},"end":{"row":21,"column":0},"placeholder":"..."},{"start":{"row":22,"column":78},"end":{"row":24,"column":0},"placeholder":"..."},{"start":{"row":25,"column":50},"end":{"row":29,"column":0},"placeholder":"..."},{"start":{"row":64,"column":73},"end":{"row":66,"column":0},"placeholder":"..."},{"start":{"row":69,"column":48},"end":{"row":71,"column":0},"placeholder":"..."},{"start":{"row":72,"column":46},"end":{"row":74,"column":0},"placeholder":"..."},{"start":{"row":75,"column":39},"end":{"row":98,"column":0},"placeholder":"..."},{"start":{"row":166,"column":16},"end":{"row":170,"column":0},"placeholder":"..."}],"scrolltop":1174,"scrollleft":0,"selection":{"start":{"row":151,"column":1},"end":{"row":151,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":116,"state":"start","mode":"ace/mode/c_cpp"}},"timestamp":1445464673000}